{"ast":null,"code":"var _s = $RefreshSig$();\nimport { collection, onSnapshot, orderBy, query } from 'firebase/firestore';\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { db } from './config';\nconst useFirestore = function () {\n  _s();\n  let collectionName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'gallery';\n  const [documents, setDocuments] = useState([]);\n  const {\n    setAlert\n  } = useAuth();\n  useEffect(() => {\n    const q = query(collection(db, collectionName), orderBy('timestamp', 'desc'));\n    const unsubscribe = onSnapshot(q, snapshot => {\n      const docs = [];\n      snapshot.forEach(doc => {\n        docs.push({\n          id: doc.id,\n          data: doc.data()\n        });\n      });\n      setDocuments(docs);\n    }, error => {\n      setAlert({\n        isAlert: true,\n        severity: 'error',\n        message: error.message,\n        timeout: 8000,\n        location: 'main'\n      });\n      console.log(error);\n    });\n    return () => unsubscribe();\n  }, [collectionName]);\n  return {\n    documents\n  };\n};\n_s(useFirestore, \"9NfnA8TbpHotMed+Zm1X8utt0SQ=\", false, function () {\n  return [useAuth];\n});\nexport default useFirestore;","map":{"version":3,"names":["collection","onSnapshot","orderBy","query","useEffect","useState","useAuth","db","useFirestore","collectionName","documents","setDocuments","setAlert","q","unsubscribe","snapshot","docs","forEach","doc","push","id","data","error","isAlert","severity","message","timeout","location","console","log"],"sources":["F:/UNIVERSIDAD/8vo semestre/Desarrollo Web/Examen Final/Proyecto/react-firebase-images-gallery-complete-project/src/firebase/useFirestore.js"],"sourcesContent":["import { collection, onSnapshot, orderBy, query } from 'firebase/firestore';\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { db } from './config';\n\nconst useFirestore = (collectionName = 'gallery') => {\n  const [documents, setDocuments] = useState([]);\n  const { setAlert } = useAuth();\n  useEffect(() => {\n    const q = query(\n      collection(db, collectionName),\n      orderBy('timestamp', 'desc')\n    );\n    const unsubscribe = onSnapshot(\n      q,\n      (snapshot) => {\n        const docs = [];\n        snapshot.forEach((doc) => {\n          docs.push({ id: doc.id, data: doc.data() });\n        });\n        setDocuments(docs);\n      },\n      (error) => {\n        setAlert({\n          isAlert: true,\n          severity: 'error',\n          message: error.message,\n          timeout: 8000,\n          location: 'main',\n        });\n        console.log(error);\n      }\n    );\n\n    return () => unsubscribe();\n  }, [collectionName]);\n\n  return { documents };\n};\n\nexport default useFirestore;\n"],"mappings":";AAAA,SAASA,UAAU,EAAEC,UAAU,EAAEC,OAAO,EAAEC,KAAK,QAAQ,oBAAoB;AAC3E,SAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,OAAO,QAAQ,wBAAwB;AAChD,SAASC,EAAE,QAAQ,UAAU;AAE7B,MAAMC,YAAY,GAAG,YAAgC;EAAA;EAAA,IAA/BC,cAAc,uEAAG,SAAS;EAC9C,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGN,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM;IAAEO;EAAS,CAAC,GAAGN,OAAO,EAAE;EAC9BF,SAAS,CAAC,MAAM;IACd,MAAMS,CAAC,GAAGV,KAAK,CACbH,UAAU,CAACO,EAAE,EAAEE,cAAc,CAAC,EAC9BP,OAAO,CAAC,WAAW,EAAE,MAAM,CAAC,CAC7B;IACD,MAAMY,WAAW,GAAGb,UAAU,CAC5BY,CAAC,EACAE,QAAQ,IAAK;MACZ,MAAMC,IAAI,GAAG,EAAE;MACfD,QAAQ,CAACE,OAAO,CAAEC,GAAG,IAAK;QACxBF,IAAI,CAACG,IAAI,CAAC;UAAEC,EAAE,EAAEF,GAAG,CAACE,EAAE;UAAEC,IAAI,EAAEH,GAAG,CAACG,IAAI;QAAG,CAAC,CAAC;MAC7C,CAAC,CAAC;MACFV,YAAY,CAACK,IAAI,CAAC;IACpB,CAAC,EACAM,KAAK,IAAK;MACTV,QAAQ,CAAC;QACPW,OAAO,EAAE,IAAI;QACbC,QAAQ,EAAE,OAAO;QACjBC,OAAO,EAAEH,KAAK,CAACG,OAAO;QACtBC,OAAO,EAAE,IAAI;QACbC,QAAQ,EAAE;MACZ,CAAC,CAAC;MACFC,OAAO,CAACC,GAAG,CAACP,KAAK,CAAC;IACpB,CAAC,CACF;IAED,OAAO,MAAMR,WAAW,EAAE;EAC5B,CAAC,EAAE,CAACL,cAAc,CAAC,CAAC;EAEpB,OAAO;IAAEC;EAAU,CAAC;AACtB,CAAC;AAAC,GAjCIF,YAAY;EAAA,QAEKF,OAAO;AAAA;AAiC9B,eAAeE,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}