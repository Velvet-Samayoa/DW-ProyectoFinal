{"ast":null,"code":"import { getDownloadURL, ref, uploadBytesResumable } from 'firebase/storage';\nimport { storage } from './config';\nconst uploadFileProgress = (file, subFolder, imageName, setProgress) => {\n  return new Promise((resolve, reject) => {\n    const storageRef = ref(storage, subFolder + '/' + imageName);\n    const upload = uploadBytesResumable(storageRef, file);\n    upload.on('state_change', snapshot => {\n      const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n      setProgress(progress);\n    }, error => {\n      reject(error);\n    }, async () => {\n      try {\n        const url = await getDownloadURL(storageRef);\n        resolve(url);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  });\n};\nexport default uploadFileProgress;","map":{"version":3,"names":["getDownloadURL","ref","uploadBytesResumable","storage","uploadFileProgress","file","subFolder","imageName","setProgress","Promise","resolve","reject","storageRef","upload","on","snapshot","progress","bytesTransferred","totalBytes","error","url"],"sources":["F:/UNIVERSIDAD/8vo semestre/Desarrollo Web/Examen Final/Proyecto/react-firebase-images-gallery-complete-project/src/firebase/uploadFileProgress.js"],"sourcesContent":["import { getDownloadURL, ref, uploadBytesResumable } from 'firebase/storage';\nimport { storage } from './config';\n\nconst uploadFileProgress = (file, subFolder, imageName, setProgress) => {\n  return new Promise((resolve, reject) => {\n    const storageRef = ref(storage, subFolder + '/' + imageName);\n    const upload = uploadBytesResumable(storageRef, file);\n    upload.on(\n      'state_change',\n      (snapshot) => {\n        const progress =\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        setProgress(progress);\n      },\n      (error) => {\n        reject(error);\n      },\n      async () => {\n        try {\n          const url = await getDownloadURL(storageRef);\n          resolve(url);\n        } catch (error) {\n          reject(error);\n        }\n      }\n    );\n  });\n};\n\nexport default uploadFileProgress;\n"],"mappings":"AAAA,SAASA,cAAc,EAAEC,GAAG,EAAEC,oBAAoB,QAAQ,kBAAkB;AAC5E,SAASC,OAAO,QAAQ,UAAU;AAElC,MAAMC,kBAAkB,GAAG,CAACC,IAAI,EAAEC,SAAS,EAAEC,SAAS,EAAEC,WAAW,KAAK;EACtE,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,MAAMC,UAAU,GAAGX,GAAG,CAACE,OAAO,EAAEG,SAAS,GAAG,GAAG,GAAGC,SAAS,CAAC;IAC5D,MAAMM,MAAM,GAAGX,oBAAoB,CAACU,UAAU,EAAEP,IAAI,CAAC;IACrDQ,MAAM,CAACC,EAAE,CACP,cAAc,EACbC,QAAQ,IAAK;MACZ,MAAMC,QAAQ,GACXD,QAAQ,CAACE,gBAAgB,GAAGF,QAAQ,CAACG,UAAU,GAAI,GAAG;MACzDV,WAAW,CAACQ,QAAQ,CAAC;IACvB,CAAC,EACAG,KAAK,IAAK;MACTR,MAAM,CAACQ,KAAK,CAAC;IACf,CAAC,EACD,YAAY;MACV,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMpB,cAAc,CAACY,UAAU,CAAC;QAC5CF,OAAO,CAACU,GAAG,CAAC;MACd,CAAC,CAAC,OAAOD,KAAK,EAAE;QACdR,MAAM,CAACQ,KAAK,CAAC;MACf;IACF,CAAC,CACF;EACH,CAAC,CAAC;AACJ,CAAC;AAED,eAAef,kBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}